import org.gradle.util.VersionNumber

buildscript {
    ext {
        KOTLIN_VERSION = '1.5.31'
//        ANDROID_GRADLE_VERSION = '7.1.2'
    }

    repositories {
        jcenter()
        google()
        mavenCentral()
    }

    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$KOTLIN_VERSION"
//        classpath "com.android.tools.build:gradle:$ANDROID_GRADLE_VERSION"
    }
}

plugins {
    id 'com.vanniktech.code.quality.tools' version '0.21.0'
    id 'com.android.application' version '7.1.3' apply false
}

allprojects {
    buildscript {
        repositories {
            jcenter()
            google()
        }
    }

    repositories {
//        google()
//        jcenter()
    }


    codeQualityTools {
        htmlReports true
        xmlReports false

        detekt {
            config = rootProject.file('config/detekt-config.yml')
        }

        ktlint {
            final String hardcodedVersion = '0.40.0'
            if (VersionNumber.parse(hardcodedVersion) > VersionNumber.parse(toolVersion)) {
                toolVersion = hardcodedVersion
            }
        }

        cpd {
            enabled false
        }
    }
}

evaluationDependsOnChildren()

task subprojectDefaultTasks {
    subprojects.each { subproject ->
        subproject.defaultTasks.each {
            dependsOn subproject.path+":"+it
        }
    }
}

defaultTasks 'subprojectDefaultTasks'
